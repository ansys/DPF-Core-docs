
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Troubleshooting &#8212; PyDPF-Core</title>
    
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css\ansys_sphinx_theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    
        <link href="../_static/css/breadcrumbs.css" rel="stylesheet">
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API reference" href="../api/index.html" />
    <link rel="prev" title="DPF XML files" href="xmlfiles.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../getting_started/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../examples/index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../contributing.html">
  Contribute
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/pydpf-core" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    
    
        <div class="container-xl">
    <div class="row">
        <div class="col-12 col-md-3" id="breadcrumbs-spacer"></div>
        <div class="col-12 col-md-11 col-xl-9" id="breadcrumbs">
          
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    
        <li class="nav-item nav-item-additional-breadcrumb"><a href="https://docs.pyansys.com/">PyAnsys</a> » </li>
    
    
        <li class="nav-item nav-item-0"><a href="../index.html">PyDPF-Core</a> » </li>
    

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">User guide</a> » </li>
        <li class="nav-item nav-item-this"><a href="">Troubleshooting</a></li> 
      </ul>
    </div>
        </div>
  </div>
</div>
    


    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="concepts.html">
   Terms and concepts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="waysofusing.html">
   DPF scripting languages
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="stepbystep.html">
   DPF usage
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="model.html">
   DPF model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="operators.html">
   Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fields_container.html">
   Fields container and fields
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="plotting.html">
   Plot
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="custom_operators.html">
   Custom operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="xmlfiles.html">
   DPF XML files
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Troubleshooting
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#server-issues">
   Server issues
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#start-the-dpf-server">
     Start the DPF server
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#connect-to-the-dpf-server">
     Connect to the DPF server
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-the-pydpf-core-package">
     Import the
     <code class="docutils literal notranslate">
      <span class="pre">
       pydpf-core
      </span>
     </code>
     package
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#model-issues">
   Model issues
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#invalid-utf-8-error">
     Invalid UTF-8 error
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#performance-issues">
   Performance issues
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-and-set-a-field-s-data">
     Get and set a field’s data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#autocompletion-in-notebooks">
     Autocompletion in notebooks
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="troubleshooting">
<span id="user-guide-troubleshooting"></span><h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading">#</a></h1>
<p>This page explains how to resolve the most common issues encountered when
using PyDPF-Core. It also includes suggestions for improving scripts.</p>
<section id="server-issues">
<h2>Server issues<a class="headerlink" href="#server-issues" title="Permalink to this heading">#</a></h2>
<section id="start-the-dpf-server">
<h3>Start the DPF server<a class="headerlink" href="#start-the-dpf-server" title="Permalink to this heading">#</a></h3>
<p>When using PyDPF-Core to start the server with the
<a class="reference internal" href="../api/ansys.dpf.core.server.html#ansys.dpf.core.server.start_local_server" title="ansys.dpf.core.server.start_local_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start_local_server()</span></code></a> method
or when starting the server manually with the <code class="docutils literal notranslate"><span class="pre">Ans.Dpf.Grpc.sh``or</span> <span class="pre">``Ans.Dpf.Grpc.bat</span></code>
file, a Python error might occur: <code class="docutils literal notranslate"><span class="pre">TimeoutError:</span> <span class="pre">Server</span> <span class="pre">did</span> <span class="pre">not</span> <span class="pre">start</span> <span class="pre">in</span> <span class="pre">10</span> <span class="pre">seconds</span></code>.
This kind of error might mean that the server or its dependencies were not found. Ensure that
the environment variable <code class="docutils literal notranslate"><span class="pre">AWP_ROOT{VER}</span></code> is set, where <code class="docutils literal notranslate"><span class="pre">VER``is</span>&#160; <span class="pre">the</span> <span class="pre">three-digit</span> <span class="pre">numeric</span>
<span class="pre">format</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">version,</span> <span class="pre">such</span> <span class="pre">as</span> <span class="pre">``221</span></code> or <code class="docutils literal notranslate"><span class="pre">222</span></code>.</p>
</section>
<section id="connect-to-the-dpf-server">
<h3>Connect to the DPF server<a class="headerlink" href="#connect-to-the-dpf-server" title="Permalink to this heading">#</a></h3>
<p>If an issue appears while using Py-DPF code to connect to an initialized server with the
<a class="reference internal" href="../api/ansys.dpf.core.server.html#ansys.dpf.core.server.connect_to_server" title="ansys.dpf.core.server.connect_to_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connect_to_server()</span></code></a> method, ensure that the
IP address and port number that are set as parameters are applicable for a DPF server started
on the network.</p>
</section>
<section id="import-the-pydpf-core-package">
<h3>Import the <code class="docutils literal notranslate"><span class="pre">pydpf-core</span></code> package<a class="headerlink" href="#import-the-pydpf-core-package" title="Permalink to this heading">#</a></h3>
<p>Assume that you are importing the <code class="docutils literal notranslate"><span class="pre">pydpf-core</span></code> package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.dpf</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">dpf</span>
</pre></div>
</div>
<p>If an error lists missing modules, see <span class="xref std std-ref">ref_ref_compatibility</span>.
The <a class="reference external" href="https://pypi.org/project/ansys-grpc-dpf/">ansys.grpc.dpf</a> module
should always be synchronized with its server version.</p>
</section>
</section>
<section id="model-issues">
<h2>Model issues<a class="headerlink" href="#model-issues" title="Permalink to this heading">#</a></h2>
<section id="invalid-utf-8-error">
<h3>Invalid UTF-8 error<a class="headerlink" href="#invalid-utf-8-error" title="Permalink to this heading">#</a></h3>
<p>Assume that you are trying to access the <a class="reference internal" href="../api/ansys.dpf.core.model.html#ansys.dpf.core.model.Model" title="ansys.dpf.core.model.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">ansys.dpf.core.model.Model</span></code></a> class.
The following error might be raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">libprotobuf</span> <span class="n">ERROR</span> <span class="n">C</span><span class="p">:</span>\<span class="o">.</span><span class="n">conan</span>\<span class="mi">897</span><span class="n">de8</span>\<span class="mi">1</span>\<span class="n">protobuf</span>\<span class="n">src</span>\<span class="n">google</span>\<span class="n">protobuf</span>\<span class="n">wire_format_lite</span><span class="o">.</span><span class="n">cc</span><span class="p">:</span><span class="mi">578</span><span class="p">]</span>
<span class="n">String</span> <span class="n">field</span> <span class="s1">&#39;ansys.api.dpf.result_info.v0.ResultInfoResponse.user_name&#39;</span> <span class="n">contains</span> <span class="n">invalid</span> <span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
<span class="n">data</span> <span class="n">when</span> <span class="n">serializing</span> <span class="n">a</span> <span class="n">protocol</span> <span class="n">buffer</span><span class="o">.</span> <span class="n">Use</span> <span class="n">the</span> <span class="s1">&#39;bytes&#39;</span> <span class="nb">type</span> <span class="k">if</span> <span class="n">you</span> <span class="n">intend</span> <span class="n">to</span> <span class="n">send</span> <span class="n">raw</span> <span class="nb">bytes</span><span class="o">.</span>
</pre></div>
</div>
<p>Invalid UTF-8 data is preventing the model from being accessed. To avoid this error, ensure that
you are using PyDPF-Core version 0.3.2 or later. While a warning is still raised, the invalid UTF-8
data should not prevent you from using the <a class="reference internal" href="../api/ansys.dpf.core.model.html#ansys.dpf.core.model.Model" title="ansys.dpf.core.model.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">ansys.dpf.core.model.Model</span></code></a> class.</p>
<p>Then, with result files reproducing this issue, you can prevent the warning from being raised with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.dpf</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">dpf</span>
<span class="n">dpf</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">set_dynamic_available_results_capability</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>However, the preceding code disables the reading and generation of the available results for the model.
Any static results that are available for the model are used instead.</p>
</section>
</section>
<section id="performance-issues">
<h2>Performance issues<a class="headerlink" href="#performance-issues" title="Permalink to this heading">#</a></h2>
<section id="get-and-set-a-field-s-data">
<h3>Get and set a field’s data<a class="headerlink" href="#get-and-set-a-field-s-data" title="Permalink to this heading">#</a></h3>
<p>Using the <a class="reference internal" href="../api/ansys.dpf.core.field.html#ansys.dpf.core.field.Field" title="ansys.dpf.core.field.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> class to get or set field data entity
by entity can be slow if the field’s size is large or if the server is far from the Python client.
To improve performance, use the <a class="reference internal" href="../api/ansys.dpf.core.field.html#ansys.dpf.core.field.Field.as_local_field" title="ansys.dpf.core.field.Field.as_local_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">as_local_field()</span></code></a>
method in a context manager to bring the field data from the server to your local machine. For an
example, see <a class="reference internal" href="../examples/00-basic/05-use_local_data.html#ref-use-local-data-example"><span class="std std-ref">Bring a field’s data locally to improve performance</span></a>.</p>
</section>
<section id="autocompletion-in-notebooks">
<h3>Autocompletion in notebooks<a class="headerlink" href="#autocompletion-in-notebooks" title="Permalink to this heading">#</a></h3>
<p>Autocompletion in Jupyter notebook can sometimes be slow for large models. The interpreter might
evaluate the getters of some properties when the tab key is pressed. To disable this capability, use the
<a class="reference internal" href="../api/ansys.dpf.core.settings.html#ansys.dpf.core.settings.disable_interpreter_properties_evaluation" title="ansys.dpf.core.settings.disable_interpreter_properties_evaluation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">disable_interpreter_properties_evaluation()</span></code></a>
method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.dpf</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">dpf</span>
<span class="n">dpf</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">disable_interpreter_properties_evaluation</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright (c) 2022 ANSYS, Inc. All rights reserved.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.1.1.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>