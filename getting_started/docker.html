
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>DPF in Docker &#8212; PyDPF-Core 0.6.0 documentation</title>
    
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css\ansys_sphinx_theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    
        <link href="../_static/css/breadcrumbs.css" rel="stylesheet">
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User guide" href="../user_guide/index.html" />
    <link rel="prev" title="Dependencies" href="dependencies.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="None">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../user_guide/index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  APIs
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../operator_reference.html">
  Operators
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../examples/index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../contributing.html">
  Contribute
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/DPF-Core" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    
    
        <div class="container-xl">
    <div class="row">
        <div class="col-12 col-md-3" id="breadcrumbs-spacer"></div>
        <div class="col-12 col-md-11 col-xl-9" id="breadcrumbs">
          
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    
    
        <li class="nav-item nav-item-0"><a href="../index.html">PyDPF-Core 0.6.0 documentation</a> » </li>
    

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Getting started</a> » </li>
        <li class="nav-item nav-item-this"><a href="">DPF in Docker</a></li> 
      </ul>
    </div>
        </div>
  </div>
</div>
    


    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="compatibility.html">
   Compatibility
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="install.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dependencies.html">
   Dependencies
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   DPF in Docker
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-the-dpf-image">
   Install the DPF image
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-the-dpf-container-from-python">
     Use the DPF container from Python
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="dpf-in-docker">
<span id="ref-docker"></span><h1>DPF in Docker<a class="headerlink" href="#dpf-in-docker" title="Permalink to this headline">#</a></h1>
<p>On any operating system, you can run DPF in a containerized environment
such as <a class="reference external" href="https://www.docker.com/">Docker</a> or <a class="reference external" href="https://singularity.hpcng.org/">Singularity</a>.</p>
<p>Advantages of using a containerized environment include:</p>
<ul class="simple">
<li><p>Running in a consistent environment regardless of the host operating system</p></li>
<li><p>Offering portability and ease of install</p></li>
<li><p>Supporting large-scale cluster deployment using <a class="reference external" href="https://kubernetes.io/">Kubernetes</a></p></li>
<li><p>Providing genuine application isolation through containerization</p></li>
</ul>
<p>The following sections assume that you are going to run DPF in Docker.</p>
<section id="install-the-dpf-image">
<h2>Install the DPF image<a class="headerlink" href="#install-the-dpf-image" title="Permalink to this headline">#</a></h2>
<ol class="arabic">
<li><p>Using your GitHub credentials, download the Docker image in the
<a class="reference external" href="https://https://github.com/pyansys/DPF-Core">DPF-Core GitHub</a> repository.</p></li>
<li><p>If you have Docker installed, use a GitHub personal access token (PAT) with
<code class="docutils literal notranslate"><span class="pre">packages</span> <span class="pre">read</span></code> permission to authorize Docker to access this repository.
For more information, see <a class="reference external" href="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token">Creating a personal access token</a>.</p></li>
<li><p>Save the token to a file:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="n">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span> <span class="o">&gt;</span> <span class="n">GH_TOKEN</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div></blockquote>
<p>This lets you send the token to Docker without leaving the token value
in your history.</p>
</li>
<li><p>Authorize Docker to access the repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>GH_USERNAME=&lt;my-github-username&gt;
cat GH_TOKEN.txt | docker login docker.pkg.github.com -u $GH_USERNAME --password-stdin
</pre></div>
</div>
</li>
<li><p>Launch DPF directly from Docker with a short script or directly from the command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run -it --rm -v `pwd`:/dpf -p 50054:50054 docker.pkg.github.com/pyansys/dpf-core/dpf:v2021.1
</pre></div>
</div>
</li>
</ol>
<p>Note that the preceding command shares the current directory to the <code class="docutils literal notranslate"><span class="pre">/dpf</span></code>
directory contained within the image.  This is necessary as the DPF
binary within the image must access the files within the image
itself. Any files that you want to have DPF read must be placed in
<code class="docutils literal notranslate"><span class="pre">pwd</span></code>. You can map other directories as needed, but these
directories must be mapped to the <code class="docutils literal notranslate"><span class="pre">/dpf</span></code> directory for the server to
see the files that you want it to read.</p>
<section id="use-the-dpf-container-from-python">
<h3>Use the DPF container from Python<a class="headerlink" href="#use-the-dpf-container-from-python" title="Permalink to this headline">#</a></h3>
<p>Normally PyDPF-Core attempts to start the DPF server on the first
use of the <code class="docutils literal notranslate"><span class="pre">dpf</span></code> class. If you do not have Ansys installed and simply want
to use the Docker image, you can override this behavior by connecting to the
DPF server on a specified port:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.dpf</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">dpf_core</span>

<span class="c1"># uses 127.0.0.1 and port 50054 by default</span>
<span class="n">dpf_core</span><span class="o">.</span><span class="n">connect_to_server</span><span class="p">()</span>
</pre></div>
</div>
<p>If you want to avoid having to run the <code class="docutils literal notranslate"><span class="pre">connect_to_server()</span></code> method
at the start of every script, you can set environment variables to tell
PyDPF-Core to always attempt to connect to DPF running within the Docker
image:</p>
<p>On Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">DPF_START_SERVER</span><span class="o">=</span><span class="kc">False</span>
<span class="n">export</span> <span class="n">DPF_PORT</span><span class="o">=</span><span class="mi">50054</span>
</pre></div>
</div>
<p>On Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">DPF_START_SERVER</span><span class="o">=</span><span class="kc">False</span>
<span class="nb">set</span> <span class="n">DPF_PORT</span><span class="o">=</span><span class="mi">50054</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">DPF_PORT</span></code> environment variable is the port exposed from the
DPF container. It should match the first value within the <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">50054:50054</span></code>
pair.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DPF_START_SERVER</span></code> environment variable tells PyDPF-core not to start
an instance but rather use <code class="docutils literal notranslate"><span class="pre">DPF_IP</span></code> and <code class="docutils literal notranslate"><span class="pre">DPF_PORT</span></code> environment variables
to look for a running instance of the service. If the <code class="docutils literal notranslate"><span class="pre">DPF_IP</span></code> and <code class="docutils literal notranslate"><span class="pre">DPF_PORT</span></code>
environment variables are undefined, they default to <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code> and <code class="docutils literal notranslate"><span class="pre">50054</span></code>
respectively.</p></li>
</ul>
</section>
</section>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright (c) 2022 ANSYS, Inc. All rights reserved.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>